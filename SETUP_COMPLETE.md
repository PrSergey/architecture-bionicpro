# ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π docker-compose.yaml –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ –∫–æ—Ä–Ω—è:

```bash
docker-compose up -d
```

### 2. –í–∫–ª—é—á—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (9 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

#### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **frontend** - React (http://localhost:3000)
- ‚úÖ **backend** - Java Spring Boot API (http://localhost:8000)
- ‚úÖ **keycloak** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (http://localhost:8080)

#### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **postgres** - –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è (–ø–æ—Ä—Ç 5432)
- ‚úÖ **keycloak_db** - Keycloak –ë–î (–ø–æ—Ä—Ç 5433)
- ‚úÖ **airflow_db** - Airflow –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø–æ—Ä—Ç 5434)
- ‚úÖ **clickhouse** - –í–∏—Ç—Ä–∏–Ω–∞ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ (–ø–æ—Ä—Ç—ã 8123, 9000)

#### ETL
- ‚úÖ **airflow-webserver** - Airflow UI (http://localhost:8081)
- ‚úÖ **airflow-scheduler** - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

### 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—É—Ç–∏

–í—Å–µ –ø—É—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:
- `./frontend` ‚Üí Frontend
- `./task2/backend` ‚Üí Backend
- `./task2/airflow/dags` ‚Üí Airflow DAG
- `./task2/airflow/scripts` ‚Üí SQL —Å–∫—Ä–∏–ø—Ç—ã
- `./keycloak/realm-export.json` ‚Üí Keycloak –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 4. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Frontend –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Backend –∏ Keycloak
- Backend –∑–∞–≤–∏—Å–∏—Ç –æ—Ç ClickHouse –∏ Keycloak
- Airflow –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ë–î
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ `bionicpro-network`

### 5. Healthchecks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç healthchecks –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∑–∞–ø—É—Å–∫–∞.

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## üìã –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

1. **–°–æ–∑–¥–∞—Ç—å –≤–∏—Ç—Ä–∏–Ω—É –≤ ClickHouse:**
   ```bash
   docker exec -i bionicpro-clickhouse clickhouse-client < task2/airflow/scripts/create_data_mart.sql
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Airflow –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** (http://localhost:8081):
   - PostgreSQL: `postgres_default` ‚Üí `postgres:5432`
   - ClickHouse: —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

3. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å DAG** –≤ Airflow UI

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `docker-compose up -d`.

